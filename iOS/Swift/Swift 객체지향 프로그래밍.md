# Swift 객체지향 프로그래밍

## 구조체와 클래스

- property, method를 사용하여 구조화된 데이터와 기능을 갖는 것
- class: Reference Type
- struct: Value Type
	- 클래스는 let 으로 선언해도 내부 값 변경 가능
- deinit
	- 인스턴스 소멸 전에 데이터 저장 or 다른 객체에 인스턴스 소멸을 알릴때 주로 구현 

- 같은점
	- 프로퍼티의 정의
	- 메소드의 정의
	- subscript
	- init
	- extension
	- protocol 준수 가능

- 다른점
	- 구조체는 상속 불가
	- 타입 캐스팅은 클래스의 인스턴스만
	- deinit은 클래스의 인스턴스만
	- reference counting은 클래스의 인스턴스만
	- 인스턴스가 같은지 확인하는 방법: === 연산자 사용


### 구조체와 클래스 선택 사용 방법

- 구조체 권장할 경우 \(1개 이상 만족시\)
  - 연관된 간단한 값의 집합을 캡슐화 하는것만이 목적일 때
  - 캡슐화한 값을 참조하는것보다 복사하는것이 합당할 떄
  - 구조체에 저장된 프로퍼티가 값 타입이며 참조하는 것보다 복사하는것이 합당할때
  - 다른 타입으로부터 상속받거나 자신을 상속할 필요가 없을 때


## 프로퍼티와 메소드

### Property

* 저장 프로퍼티: 변수 또는 상수
* 연산 프로퍼티: 값을 저장한 것이 아니라 특정 연산을 실행한 결과값
* 타입 프로퍼티: 특정 타입에 사용되는 프로퍼티
* 프로퍼티 감시자
  * 값이 변하는 것을 감시하는, 값이 변화할 때 특정 액션을 실행
  * 저장 프로퍼티에 적용할 수 있으며 상속 가능

#### 지연 저장 프로퍼티 (lazy)

* lazy var 
  * 호출이 있어야 값을 초기화
* 다중 스레드 환경에서 동시다발적 접근을 할 때는 한 번만 초기화된다는 보장이 없다
* 생성되지 않은 지연 저장 프로퍼티에 많은 스레드가 비슷한 시점에 접근한다면, 여러번 초기화 될 수도 있다

#### 연산 프로퍼티

* get, set 설정하는 변수 \( get만 사용 가능 \)

#### 프로퍼티 감시자

* 값이 새로 할당될 때마다 호출 
* 이때 변경되는 값이 현재와 같더라도 호출
* wiiSet, didSet

#### 전역변수

* 전역변수와 전역상수는 지연저장 프로퍼티처럼 처음 접근할 때 최초로 연산이 이루어진다
* 따라서 lazy를 사용할 이유가 없음

#### 타입 프로퍼티

* 타입자체에 영향을 미치는 프로퍼티
* 인스턴스의 생성 여부와 상관없이 타입 프로퍼티의 값은 하나
* 그 타입은 모든 인스턴스가 공통으로 사용, 공통으로 수정가능한 변수
* 다중 스레드 환경이라도 한번만 초기화 된다는 보장을 받는다
* static let rate: Double = 1.0

#### Key Path

* 프로퍼티의 값을 바로 꺼내오는 것이 아니라 어떤 프로퍼티의 위치만 참조하도록 할 수 있다
* 간접적으로 특정 타입의 어떤 프로퍼티 값을 가리켜야 할지 미리 지정해두고 사용할 수 있다
* \타입이름.경로.경로 
* \Person.name
* 값 가져오는 방법 : yagom\[keyPath: \Person.name\] =&gt; yagom.name
* 잘 활용할 경우 프로토콜과 마찬가지로 타입간의 의존성을 낮추는데 많은 도움을 준다

### 메소드

#### 타입 메서드 \(클래스 메소드와 유사\)

* 메소드 앞에 static을 사용하여 타입 메소드 임을 나타내줍니다.
* 클래스의 경우 func 앞에 static이나 class 선언 둘다 사용 가능 
  * static 상속 후 재정의 불가능
  * class 상속 후 재정의 가능

## 인스턴스 생성 및 소멸

### 인스턴스 생성

* init method
* 사용자 정의 이니셜라이저를 만들게 되면 기본 이니셜라이즈는 별도로 구현하지 않는 이상 사용할 수 없습니다. \(기본을 사용하고 싶은 경우, extension에서 사용자 정의 이니셜라이즈를 구현하면 됩니다\)
* 맴버와이즈 이니셜라이져 : struct만 가능 
  * Position\(x: 1.0, y: 1.0\) 이런거 자동으로 만들어줌
* 실패가능한 init : init?

#### 함수를 사용한 프로퍼티 기본값 설정

```swift
class SomeClass {
    let someProperty: SomeType = {
        return someValue
    }()
}
```

## 접근제어

* 은닉화
* 코드끼리 상호작용을 할 때 파일 간 또는 모듈 간에 접근을 제한할 수 있는 기능입니다.
* 상세구현은 숨기고 허용된 기능만 사용하는 인터페이스를 제공
* open
  * public 이상의 접근 수준
  * 해당 클래스를 다른 모듈에서 부모 클래스로 활용하겠다는 목적으로 클래스를 만들었다고 볼 수 있다
* 상위 요소보다 하위 요소가 더 높은 접근 수준을 가질 수 없다
* setter의 경우만 더 낮은 접근 수준을 갖게 할 수 있다
  * public private\(set\)

